<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ES6 Araay 新方法</title>
</head>
<body>
    <script>
    // const race='100m Dash';
    // const winners=['Hunber Gath','Singa song','Imda Bos'];
    // // const win = [];
    // // for(let i=0;i<winners.length;i++){
    // //     let winnersinfo=new Object();
    // //     winnersinfo.name=winners[i];
    // //     winnersinfo.race=race;
    // //     winnersinfo.place=i;
    // //     win.push(winnersinfo);
    // // }
 
    // // console.log(win);
    // // 遍历每一项 如果箭头函数体内只有一句代码，并且是返回值 省去return；
    // const win = winners.map((winner,i)=>({
    //     name:winner,
    //     race,
    //     place:i+1

    // }));      
    // //函数式编程
    // console.log(win);
    // 手写代码，
const race='100m Dash';
const winners = new Array('Hunber Gath','Singa song','Imda Bos');
Array.prototype.map = function(fn) {
    // 方法作为对象的方法调用时，this指向当前对象
    let arr = this;
    if (!Array.isArray(arr)) {
      throw new Error('只能对数组用map方法');
    } 
  
    // map功能
    for (let index = 0; index < arr.length;index++) {
        fn(arr[index], index, arr);
    }
  
  
  }

  // arr.forEach(fu);
  // console.log(Array.prototype.forEach2);
  // [1,2,3].forEach2('abc');
  
  // 调用的方式
  const win = winners.map((winner, i) => ({
    name:winner,
    race,
    place:i+1

}));     
console.log(win);
    </script>
</body>
</html>