6/12
面试题：url到页面的渲染完成，发生了什么
1）DNS解析，将域名地址解析为IP地址
- 浏览器DNS缓存
- 系统DNS缓存
- 路由器缓存
- 网络运营商DNS缓存
- 递归搜索 blog.baiud.com
- .com 域名下查找DNS解析
-.baidu 
- blog
-出错了
2） TCP 连接 TCP三次握手
- 第一次握手，由浏览器发起，用来告诉服务器我要发送请求了。
- 第二次握手，由服务器发起，告诉浏览器我准备接受了，你赶紧发送了。
- 第三次握手，由浏览器发送，告诉服务器，我马上就出发了，准备接收吧。
为什么不是一次就可以呢，那我们假设是一次握手，浏览器告诉服务器，嘿，我要给你发送请求了，接着就把请求发送过去了，然后服务器在那个时候没有空闲
二次，可能浏览器又没有空闲，所以在三次握手来确保浏览器和服务器都没有问题
谢希仁著《计算机网络》第四版中讲“三次握手”的目的是“为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误”。在另一部经典的《计算机网络》一书中讲“三次握手”的目的是为了解决“网络中存在延迟的重复分组”的问题。
3) 发送请求
- 请求报文，HTTP协议的通信内容
4）接受响应
- 响应报文
5）渲染页面
- 遇见html标记，浏览器调用HTML解析器解析成token并构建成dom树
- 遇见style/link标记，浏览器调用css解析器，处理css标记并构建cssom树
- 遇到script标记，调用javascript解析器，处理script代码（绑定事件，修改dom/cssom树）
-将dom树和cssom树合并成一个渲染树
- 根据渲染树来计算布局，计算每个节点的集合信息。
- 将各个节点颜色绘制到屏幕上（渲染）

注意：
这五个步骤不一定按照顺序执行，如果dom数或者cssom树被修改了，可能会执行过次的布局和渲染。往往实际页面中，这些步骤都会执行多次的。

6）断开连接。TCP四次挥手
第一次挥手，由浏览器发起的，发送给服务器。我东西发送完了（请求报文）。你准备关闭吧
第二次挥手，由服务器发起的， 告诉浏览器，我东西接受完了（请求报文）。我准备关闭了，你也准备吧。
第三次挥手，服务发起，告诉浏览器，我东西发送完了（响应报文），你准备关闭吧
第四次挥手，由浏览器发起，告诉服务器，我东西接受完了，我准备关闭了（响应报文），你也准备关闭吧

性能优化：抛开了对页面的具体分析，任何的性能优化都是站不住脚的，盲目的使用一些优化措施，结果可能会适得其反。因此切实的去分析页面的实际性能表现，不断的改进测试，才是正确的优化途径。
